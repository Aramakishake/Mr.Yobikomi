# Mr.Yobikomi
## 概要
* 呼び込みくんのBGMをArduinoと圧電ブザーを使って演奏する
## 回路のつなぎ方
* とりあえず写真撮って載せとく
## 音程
* A4 = 440 Hz
* 半音上がると、2^(1/12)≒1.059倍、周波数が高くなる
## テンポ
* BPM128と仮定する
    * 1minに128*4分音符/休符が入る
    * 4分音符の長さ(s) = 60/128 (s) = 15/32 (s) = 15000/32 (ms) = 468.75 (ms)
    * ただし、tone関数のパラメタのトーン持続時間の型はunsigned longのようなので整数に丸める(参考：https://nobita-rx7.hatenablog.com/entry/28248243)※詳細は要検証
    * とりあえず469(ms)に丸めるか？
* BPM125だと計算楽では...？
    * 4分音符の長さ(s) = 60000/125 (ms) = 480(ms)
    * ひとまず、BPM125とする
    * つまり、以下のようにする
        * 4分音符 = 480ms
        * 8分音符 = 240ms

## メロディ(メモ)
(Cメジャーキー)
    ソソーラソミソ ソソーラソミソ
    ドドドレミーレ ミーーソソーー
    ドドドレミーー ドドドレミー
    レレレドレミ ソファミレ
Dメジャーキーなので、以下が正
    ララーシラファ#ラ ララーシラファ#ラ
    レレレミファ#ーミ ファ#ーララー
    レレレミファ#ー レレレミファ#ー
    ミミミレミファ# ラソファ#ミ
## やったこと
* attachInterrupt関数を使用して、再生中でも停止できるようにした
    * 参考：https://miraiworks.org/?p=5765
    * 引数：割り込み番号(2pin(=0) or 3pin(=1))、割り込み時に呼び出す関数、割り込み条件
* 止めるまで無限にループさせた(止められるようになってから作った)
* 今スイッチONなのかOFFなのかわかるように、LEDを光らせる
* もう1つピエゾ素子を回路に組み込んで、同時に鳴らして、ハモらせた
    * ハモらせるのは単純な8分の繰り返しにした(Cならドソミソドソミソみたいな)
    * やっててわかったのは低すぎる音は出ない(A2 110Hzとかは出なかった)こと
    * ハモらせるために、Toneライブラリを使用した
        * Toneライブラリの内訳はまだわかっていない
        * 多分TimerOneとかTimerThreeとか使ってるっぽいのよね
## 次やりたいこと
* コードがわかれば8分音符の繰り返しができるような関数ができたら楽しそう
    * (例1)G → |G3 D4 B4 D4|G3 D4 B4 D4|
    * (例2)C → |C3 G3 E3 G3|C3 G3 E3 G3|
    * 3度と5度の基準音に対する倍率は同じなのでそれ使って行けそうではある
## 次のアクション
* 回路を再現できるように情報を残しておく(とりあえず写真を撮って入れとく)
* 回路を描くソフトとか調べてみる